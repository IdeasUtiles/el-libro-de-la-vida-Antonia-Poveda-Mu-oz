<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Escenarios del Corazón — V1.2</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="mark" aria-hidden="true">✦</div>
      <div class="brand-text">
        <div class="title">Escenarios del Corazón</div>
        <div class="subtitle">Un juego conversado, inspirado en <em>El Libro de la Vida</em></div>
      </div>
    </div>
    <div class="top-actions">
      <button class="ghost" id="btnHelp" type="button">Cómo se juega</button>
      <button class="ghost" id="btnReset" type="button">Reiniciar</button>
    </div>
  </header>

  <main class="shell">
    <section class="card hero" id="screenIntro">
      <div class="hero-grid">
        <div>
          <h1>Antonia: hoy jugamos a contar tu historia</h1>
          <p class="lead" id="introPara"></p>

          <div class="form-grid">
            <label class="field">
              <span>Tu nombre (opcional)</span>
              <input id="inpName" type="text" placeholder="(puedes dejarlo vacío)" />
            </label>

            <label class="field">
              <span>Hoy me siento con energía…</span>
              <select id="selEnergy">
                <option value="baja">Baja</option>
                <option value="media" selected>Media</option>
                <option value="alta">Alta</option>
              </select>
            </label>

            <label class="field full">
              <span>Modo</span>
              <div class="toggle">
                <input id="chkTheatre" type="checkbox" checked />
                <label for="chkTheatre"><strong>Modo teatro</strong> (personaje → tú)</label>
              </div>
              <div class="hint">Si quieres ir más rápido, desactívalo.</div>
            </label>
          </div>

          <div class="cta-row">
            <button class="primary" id="btnStart" type="button">Empezar</button>
            <button class="secondary" id="btnResume" type="button" style="display:none;">Continuar donde lo dejé</button>
          </div>

          <p class="tiny">Herramienta inspirada (sin arte oficial ni afiliación). Uso privado/terapéutico.</p>
        </div>

        <div class="poster" aria-hidden="true">
          <div class="poster-inner">
            <div class="poster-title">Tu escena de hoy</div>
            <div class="poster-lines">
              <div class="line">• Elige un altar</div>
              <div class="line">• Entra a una mini-escena</div>
              <div class="line">• Responde corto y real</div>
              <div class="line">• Cierra con un mensaje</div>
            </div>
            <div class="poster-art" aria-hidden="true">
              <svg viewBox="0 0 220 120" width="100%" height="100%">
                <defs>
                  <linearGradient id="g1" x1="0" x2="1">
                    <stop offset="0" stop-color="rgba(255,91,214,0.9)"/>
                    <stop offset="0.55" stop-color="rgba(247,201,72,0.9)"/>
                    <stop offset="1" stop-color="rgba(83,213,253,0.9)"/>
                  </linearGradient>
                </defs>
                <path d="M20,95 C45,40 70,30 95,62 C108,80 118,82 130,65 C150,38 175,38 200,88"
                      fill="none" stroke="url(#g1)" stroke-width="7" stroke-linecap="round"/>
                <circle cx="60" cy="45" r="9" fill="rgba(255,255,255,0.85)"/>
                <circle cx="155" cy="48" r="7" fill="rgba(255,255,255,0.70)"/>
                <circle cx="110" cy="30" r="5" fill="rgba(255,255,255,0.55)"/>
              </svg>
            </div>
            <div class="poster-badge">8</div>
          </div>
        </div>
      </div>
    </section>

    <section class="card quiz" id="screenQuiz" style="display:none;">
      <div class="quiz-top">
        <div class="progress">
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div class="progress-text" id="progressText">0%</div>
        </div>
        <div class="altar-chip" id="altarChip">Altar</div>
      </div>

      <div class="question">
        <div class="q-meta">
          <div class="q-title" id="qTitle">Pregunta</div>
          <div class="q-counter" id="qCounter">1 / 24</div>
        </div>
        <div class="q-body" id="qBody"></div>

        <div class="q-actions">
          <button class="ghost" id="btnBack" type="button">Atrás</button>
          <div class="right-actions">
            <button class="ghost" id="btnPause" type="button">Pausar</button>
            <button class="primary" id="btnNext" type="button">Siguiente</button>
          </div>
        </div>

        <div class="kbd">
          Atajos: <span class="kbdkey">1–4</span> elegir · <span class="kbdkey">Enter</span> siguiente · <span class="kbdkey">←</span> atrás
        </div>
      </div>
    </section>

    <section class="card results" id="screenResults" style="display:none;">
      <div class="results-head">
        <h2>Se cerró el telón ✨</h2>
        <p class="lead">Un resumen con sentido, usando valores de la historia.</p>
      </div>

      <div class="panel" id="panel-summary"></div>

      <details class="details">
        <summary>Ver detalles (para Sergio / registro)</summary>
        <div class="panel" id="panel-data"></div>
      </details>

      <div class="results-actions">
        <button class="secondary" id="btnCopy" type="button">Copiar resumen</button>
        <button class="secondary" id="btnDownload" type="button">Descargar JSON</button>
        <button class="primary" id="btnNew" type="button">Hacer otra vez</button>
      </div>
    </section>
  </main>

  <dialog id="dlgHelp" class="dialog">
    <div class="dialog-inner">
      <h3>Cómo se juega</h3>
      <ul>
        <li>Cada pregunta trae una <strong>mini-escena</strong> para que tenga sentido.</li>
        <li>En <strong>Modo teatro</strong>: personaje → tú (así es más fácil hablar).</li>
        <li>“Una frase” es opcional: con una sola basta.</li>
        <li>Se guarda automáticamente en este navegador para poder pausar.</li>
      </ul>
      <div class="dialog-actions">
        <button class="primary" id="btnCloseHelp" type="button">Entendido</button>
      </div>
    </div>
  </dialog>

  <dialog id="dlgPause" class="dialog">
    <div class="dialog-inner">
      <h3>Pausa</h3>
      <p>Se ha guardado tu avance. Puedes cerrar y continuar luego.</p>
      <div class="dialog-actions">
        <button class="secondary" id="btnExitToIntro" type="button">Volver al inicio</button>
        <button class="primary" id="btnKeepGoing" type="button">Seguir</button>
      </div>
    </div>
  </dialog>

  <footer class="footer">
    <div>Sesiones por videollamada · Medellín · Inspirado en una historia (sin arte oficial)</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
