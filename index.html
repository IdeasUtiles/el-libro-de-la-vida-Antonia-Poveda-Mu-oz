<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>El Libro de la Vida — Autoevaluación (V1)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="mark" aria-hidden="true">✦</div>
      <div class="brand-text">
        <div class="title">Autoevaluación lúdica</div>
        <div class="subtitle">Inspirada en <em>El Libro de la Vida</em> (uso privado)</div>
      </div>
    </div>

    <div class="top-actions">
      <button class="ghost" id="btnHelp" type="button">Ayuda</button>
      <button class="ghost" id="btnReset" type="button">Reiniciar</button>
    </div>
  </header>

  <main class="shell">
    <section class="card hero" id="screenIntro">
      <div class="hero-grid">
        <div>
          <h1>Vamos a jugar con 8 altares</h1>
          <p class="lead">
            Es un juego breve (12–15 min). Tú eliges opciones y escribes <strong>una frase</strong> cuando te apetezca.
            Al final tendrás <strong>dos textos</strong>: uno para ti y otro para compartir con Sergio.
          </p>

          <div class="pill-row">
            <span class="pill">Sin diagnósticos</span>
            <span class="pill">Sin etiquetas</span>
            <span class="pill">Con pausa y continuar</span>
            <span class="pill">Solo para sesión</span>
          </div>

          <div class="form-grid">
            <label class="field">
              <span>Tu nombre (opcional)</span>
              <input id="inpName" type="text" placeholder="(puedes dejarlo vacío)" />
            </label>

            <label class="field">
              <span>Hoy me siento con energía…</span>
              <select id="selEnergy">
                <option value="baja">Baja</option>
                <option value="media" selected>Media</option>
                <option value="alta">Alta</option>
              </select>
            </label>
          </div>

          <div class="cta-row">
            <button class="primary" id="btnStart" type="button">Empezar</button>
            <button class="secondary" id="btnResume" type="button" style="display:none;">Continuar donde lo dejé</button>
          </div>

          <p class="tiny">
            Nota: Esto es una herramienta inspirada (fan) sin imágenes oficiales ni afiliación. No sustituye evaluación clínica.
          </p>
        </div>

        <div class="poster" aria-hidden="true">
          <div class="poster-inner">
            <div class="poster-title">Tu historia de hoy</div>
            <div class="poster-lines">
              <div class="line">• Elige un altar</div>
              <div class="line">• Responde sin prisa</div>
              <div class="line">• Usa una frase</div>
              <div class="line">• Cierra con un “mensaje”</div>
            </div>
            <div class="poster-badge">8</div>
          </div>
        </div>
      </div>
    </section>

    <section class="card quiz" id="screenQuiz" style="display:none;">
      <div class="quiz-top">
        <div class="progress">
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div class="progress-text" id="progressText">0%</div>
        </div>
        <div class="altar-chip" id="altarChip">Altar</div>
      </div>

      <div class="question">
        <div class="q-meta">
          <div class="q-title" id="qTitle">Pregunta</div>
          <div class="q-counter" id="qCounter">1 / 24</div>
        </div>
        <div class="q-body" id="qBody"></div>

        <div class="q-actions">
          <button class="ghost" id="btnBack" type="button">Atrás</button>
          <div class="right-actions">
            <button class="ghost" id="btnPause" type="button">Pausar</button>
            <button class="primary" id="btnNext" type="button">Siguiente</button>
          </div>
        </div>

        <div class="kbd">
          Atajos: <span class="kbdkey">1–4</span> elegir opción · <span class="kbdkey">Enter</span> siguiente · <span class="kbdkey">←</span> atrás
        </div>
      </div>
    </section>

    <section class="card results" id="screenResults" style="display:none;">
      <div class="results-head">
        <h2>Listo ✨</h2>
        <p class="lead">Aquí tienes dos textos. Puedes <strong>copiarlos</strong> o <strong>descargar</strong> un archivo con tus respuestas.</p>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="her">Para ti</button>
        <button class="tab" data-tab="sergio">Para Sergio</button>
        <button class="tab" data-tab="data">Datos</button>
      </div>

      <div class="tabpanels">
        <div class="panel" id="panel-her"></div>
        <div class="panel" id="panel-sergio" style="display:none;"></div>
        <div class="panel" id="panel-data" style="display:none;"></div>
      </div>

      <div class="results-actions">
        <button class="secondary" id="btnCopy" type="button">Copiar pestaña</button>
        <button class="secondary" id="btnDownload" type="button">Descargar JSON</button>
        <button class="primary" id="btnNew" type="button">Hacer otra vez</button>
      </div>

      <p class="tiny">
        Sugerencia: si quieres, Sergio puede leer contigo solo el texto “Para ti” y guardar el otro para su registro.
      </p>
    </section>
  </main>

  <!-- Modal ayuda -->
  <dialog id="dlgHelp" class="dialog">
    <div class="dialog-inner">
      <h3>Cómo jugar</h3>
      <ul>
        <li>Esto no es un examen. Responde como te salga hoy.</li>
        <li>Si una pregunta no te encaja, elige la opción “Depende / No sé”.</li>
        <li>En algunas preguntas puedes escribir <strong>una frase</strong>. Con una sola basta.</li>
        <li>Se guarda automáticamente en este navegador (para poder pausar y continuar).</li>
      </ul>
      <div class="dialog-actions">
        <button class="primary" id="btnCloseHelp" type="button">Entendido</button>
      </div>
    </div>
  </dialog>

  <!-- Modal pausa -->
  <dialog id="dlgPause" class="dialog">
    <div class="dialog-inner">
      <h3>Pausa</h3>
      <p>Se ha guardado tu avance. Puedes cerrar la ventana y continuar luego con el botón “Continuar donde lo dejé”.</p>
      <div class="dialog-actions">
        <button class="secondary" id="btnExitToIntro" type="button">Volver al inicio</button>
        <button class="primary" id="btnKeepGoing" type="button">Seguir</button>
      </div>
    </div>
  </dialog>

  <footer class="footer">
    <div>Hecho para sesiones por videollamada (Sergio). Estilo inspirado, sin arte oficial.</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
